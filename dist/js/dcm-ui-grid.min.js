"use strict";angular.module("dcm-ui.grid",[]),angular.module("dcm-ui.grid").controller("DCMGridCtrl",["$scope","$compile","$log","$interpolate","$timeout",function(e,t,n,a,r){var o=this,i=[],l=[];e.storeConfig&&localStorage[e.storeConfig]&&(n.info("GRID: attempting to load grid config from local storage"),l=JSON.parse(localStorage[e.storeConfig])),e.hasOwnProperty("columns")&&angular.isArray(e.columns)&&(i=e.columns);var c=o.columns=e.columns=[];e.hasOwnProperty("editColumns")&&(e.editColumns=c,e.editColumns.update=function(){o.redrawGrid()}),o.rowActionContent="",o.oRowActions=void 0,o.headerRow="",o.aRows=[];var u=0,d={};o.getGridDataID=function(t){return t.hasOwnProperty("$$gridDataID")||(u++,t.$$gridDataID=e.$id+"-"+u.toString()),t.$$gridDataID},o.getGridData=function(e){var t=o.getGridDataID(e);return d.hasOwnProperty(t)?d[t]:null},o.putGridData=function(e,t){d[e]=t},o.addColumn=function(e){var t=_.where(l,{title:e.title,content:e.content});t.length||(t=_.where(i,{title:e.title,content:e.content})),t.length&&(e.sortDefault=t[0].sortDefault,e.width=t[0].width,e.enabled=t[0].enabled),c.push(e)},o.redrawGrid=function(){o.tableBody.empty(),o.tableHead.empty(),o.tableHead.append(o.generateHeaderRow()),o.generateTemplates(),t(o.tableHead)(e);for(var a=0,r=o.aRows.length;r>a;a++){var i=o.aRows[a],l=o.getGridData(i);l.row=o.rowTemplate(l.scope,angular.noop),l.checkbox=l.row.find("td.dcm-grid-selectable i"),o.tableBody.append(l.row)}n.info("GRID: templates regenerated + table updated"),o.storeConfig()},o.getColWidthPct=function(e){return Math.round(e.outerWidth(!0)/o.headerRow.width()*1e4)/100},e.$on("TABLE_COL_RESIZED",function(){var e=0,t=o.headerRow.children();o.bEnableActive&&e++,angular.forEach(o.columns,function(n){if(n.enabled){var a=angular.element(t[e]);n.width=o.getColWidthPct(a).toString()+"%",e++}}),o.storeConfig()}),o.storeConfig=function(){if(e.storeConfig){var t=_.map(c,function(e){return{width:e.width,sortDefault:e.sortDefault,enabled:e.enabled,title:e.title,content:e.content}});localStorage[e.storeConfig]=JSON.stringify(t),n.info("GRID: grid config saved to local storage")}},o.oRowAttributes={},o.addRowAttributes=function(e){angular.extend(o.oRowAttributes,e)},o.oRowActionsAttributes={},o.addRowActionsAttributes=function(e){angular.extend(o.oRowActionsAttributes,e)},o.getSelectedAsArray=function(){if("single"===o.selectType){var t=[];return e.selected&&t.push(e.selected),t}return e.selected},o.selectedPosition=function(e){return _.indexOf(o.getSelectedAsArray(),e.data)},o.toggleSelected=function(t){var n,a,r;if(t)for(a=0,r=e.datasource.length;r>a;a++)n=o.getGridData(e.datasource[a]),n.checkbox.hasClass(o.checkedIcon)||o.addSelected(n);else for(a=e.selected.length-1;a>=0;a--)n=o.getGridData(e.selected[a]),o.removeSelected(n)},o.addSelected=function(t){"single"===o.selectType?(e.selected&&e.selected!==t.data&&o.removeSelected(o.getGridData(e.selected)),e.selected=t.data):e.selected.push(t.data),t.scope.$row.checked=!0,o.bEnableActive&&o.oRowActions&&e.activeRow===t.data&&o.oRowActions.addClass("selected")},o.removeSelected=function(t){"single"===o.selectType?e.selected=null:e.selected.splice(o.selectedPosition(t),1),t.scope.$row.checked=!1,o.bEnableActive&&o.oRowActions&&e.activeRow===t.data&&o.oRowActions.removeClass("selected")},o.mergeAttributes=function(e,t){angular.forEach(t,function(t,n){"ng-class"===n&&e.attr("ng-class")?e.attr(n,(e.attr("ng-class")+t).replace(/}\s*{/,", ")):e.attr(n,t)})},o.rowTemplate=angular.noop,o.activeRowTemplate=angular.noop,o.generateTemplates=function(){var e,n,a=angular.element('<tr ng-class="{selected: $row.checked}">');o.mergeAttributes(a,o.oRowAttributes);for(var r=0,i=o.columns.length;i>r;r++)e=o.columns[r],e.enabled&&(n=angular.element("<td>"),n.append(e.content),o.mergeAttributes(n,e.attributes),a.append(n));if(o.bEnableSelect){var l="{'"+o.checkedIcon+"': $row.checked, '"+o.notCheckedIcon+"': !$row.checked }",c=angular.element('<i class="fa" ng-class="'+l+'"></i>');a.append(angular.element('<td ng-click="toggleChecked($row, $event);" class="dcm-grid-selectable"></td>').append(c))}if(o.bEnableActive?(a.attr("ng-click","toggleActiveRow($row)"),a.prepend(angular.element('<td class="dcm-grid-activemarker"></td>'))):o.bEnableSelect&&a.attr("ng-click","toggleChecked($row, $event)"),o.rowTemplate=t(a),o.bRowActions){var u=angular.element('<tr class="dcm-grid-details">');o.mergeAttributes(u,o.oRowActionsAttributes);var d=o.colCount-1,s=angular.element('<td ng-click="" colspan="'+d+'">').html(o.rowActionContent);o.bEnableActive&&u.append(angular.element('<td class="dcm-grid-activemarker"></td>')),u.append(s),o.activeRowTemplate=t(u)}},o.generateHeaderRow=function(){o.colCount=0;for(var n=-1,r=0;r<o.columns.length;r++)o.columns[r].enabled&&(n=r);var i=angular.element("<tr>");if(angular.forEach(o.columns,function(n){if(n.enabled){n.icon="",o.colCount++;var r,l=e.$new(!1);l.column=n,r=t('<a>{{column.title}}<i class="fa" ng-if="column.icon" ng-class="column.icon"></a>')(l);var c=angular.element('<th class="resizable-column">').append(r);if(c.css("width",n.width?n.width:"auto"),o.sortable){var u;if(n.field)if(n.field.match(/\./)){var d=n.field.split(".");u=function(e){for(var t=e,n=0;n<d.length;n++){var a=d[n];if(!t.hasOwnProperty(a))return;t=t[a]}return t}}else u=function(e){return e[n.field]};else u=a(n.content);switch(n.sortType){case"string":n.sortFunction=function(e){var t=u(e)||"";return t.toLowerCase()};break;case"integer":n.sortFunction=function(e){var t=u(e);return t=t?t:0,parseInt(t,10)};break;case"datetime":n.sortFunction=function(e){var t=new Date(u(e));return t.getTime()};break;case"direct":n.sortFunction=u;break;default:var s;n.sortFunction=function(e){var t=u(e);switch(s||(s=typeof t,"string"===s&&t.match(/^\d{4,4}-\d\d-\d\dT\d\d:\d\d:\d\dZ$/)&&(s="datetime")),s){case"string":return t?t.toLowerCase():"";case"datetime":return t?t:"";default:return t?t:""}}}n.sortDefault&&(e.sortFunction=n.sortFunction,o.currentSort&&o.currentSort!==n&&(o.currentSort.sortDefault=!1),o.currentSort=n,e.sortOrder=n.sortDefault.toUpperCase(),"ASC"===e.sortOrder?n.icon="fa-angle-up":n.icon="fa-angle-down"),c.bind("click",function(){e.$apply(function(){o.currentSort?(o.currentSort.icon="",o.currentSort===n&&"DESC"!==e.sortOrder?(e.sortOrder="DESC",n.icon="fa-angle-down"):(e.sortOrder="ASC",n.icon="fa-angle-up")):(e.sortOrder="ASC",n.icon="fa-angle-up"),o.currentSort!==n&&(o.currentSort&&(o.currentSort.sortDefault=!1),e.sortFunction=n.sortFunction,o.currentSort=n),o.currentSort.sortDefault=e.sortOrder,o.storeConfig()})})}i.append(c)}}),o.bEnableSelect){o.colCount++;var l=angular.element('<th class="dcm-grid-selectable"></th>');if("single"!==o.selectType){var c=angular.element('<i class="fa fa-square-o">');c.bind("click",function(){e.$apply(function(){var e=c.hasClass(o.checkedIcon);o.toggleSelected(!e)})}),l.append(c),o.unbindBulkCheck&&o.unbindBulkCheck(),o.unbindBulkCheck=e.$watchCollection("selected",function(e){var t=e.length&&e.length===o.aRows.length;c.removeClass("fa-check-square-o fa-square-o").addClass(t?o.checkedIcon:o.notCheckedIcon)})}i.append(l)}return o.bEnableActive&&(o.colCount++,i.prepend(angular.element('<th class="dcm-grid-activemarker"></th>')),e.$watch("activeRow",function(e,t){void 0!==t&&o.removeActiveRow(t),o.setActiveRow(e)})),o.headerRow=i,i},o.removeActiveRow=function(t){if(t=t||e.activeRow){var n=o.getGridData(t);n&&n.row&&n.row.removeClass("active"),e.activeRow=void 0}o.oRowActions&&o.oRowActions.remove()};var s=function(e){if(e&&e.hasOwnProperty("row")){if(e.row.addClass("active"),o.bRowActions){var t=o.activeRowTemplate(e.scope,angular.noop);o.bEnableSelect&&-1!==o.selectedPosition(e)&&t.addClass("selected"),o.oRowActions=t,e.row.after(o.oRowActions)}}else o.removeActiveRow()};o.setActiveRow=function(t){if(o.removeActiveRow(),t){e.activeRow=t;var n=o.getGridData(t);n&&n.hasOwnProperty("row")?s(n):r(function(){s(n)},0)}},e.$on("$destroy",function(){if(o.bEnableActive&&e.activeRow&&o.removeActiveRow(),o.bEnableSelect)for(var t=o.getSelectedAsArray(),n=t.length-1;n>=0;n--){var a=o.getGridData(t[n]);o.removeSelected(a)}})}]),angular.module("dcm-ui.grid").directive("dcmGridColumn",[function(){return{require:"^dcmGrid",restrict:"E",scope:{field:"@",title:"@",width:"@",enabled:"@",sortType:"@",sortDefault:"@",resizable:"@"},compile:function(e,t){var n=$.trim(e.html());return function(e,a,r,o){var i={};angular.forEach(r,function(t,n){"$"!==n[0]&&void 0===e[n]&&""!==t&&(i[n.replace(/([A-Z])/g,"-$1").toLowerCase()]=t)});var l={content:n,attributes:i,enabled:void 0!==r.enabled?"false"!==r.enabled.toLowerCase():!0,title:e.title,width:e.width,resizable:void 0!==r.resizable?"false"!==r.resizable.toLowerCase():!0,field:r.field,sortType:e.sortType||"",sortDefault:void 0!==r.sortDefault?r.sortDefault||"ASC":!1};if(!r.field||""===r.field){var c=n.match(/^\s*{{\s*(\S+)\s*}}\s*$/);c&&(l.field=c[1])}void 0===t.title&&l.field&&""!==l.field&&(l.title=l.field[0].toUpperCase()+l.field.slice(1)),o.addColumn(l)}}}}]),angular.module("dcm-ui.grid").directive("dcmGrid",["$animate","$log","$compile","$window",function(e,t,n,a){return{restrict:"E",require:"dcmGrid",scope:{datasource:"=",activeRow:"=?",selected:"=?",additionalRowData:"=?",sortFunction:"=?",sortOrder:"=?",editColumns:"=?",storeConfig:"@"},controller:"DCMGridCtrl",compile:function(){return function(r,o,i,l){l.bEnableSelect=!!i.selected,l.bEnableActive=!!i.activeRow,l.sortable=!!i.sortFunction,l.selectType=i.selectType?i.selectType.toLowerCase():"multiple","multiple"===l.selectType?(l.checkedIcon="fa-check-square-o",l.notCheckedIcon="fa-square-o"):(l.checkedIcon="fa-dot-circle-o",l.notCheckedIcon="fa-circle-o"),r.additionalRowData&&(l.additionalRowData=r.additionalRowData);var c=l.tableHead=angular.element("<thead>"),u=l.tableBody=angular.element("<tbody>"),d=l.table=angular.element('<table class="dcm-grid-table resizable-columns">');i.width&&d.css("width",i.width),d.append(c),c.append(l.generateHeaderRow()),n(d)(r),l.generateTemplates();var s=[],f={};l.bEnableSelect&&"single"===l.selectType&&r.$watch("selected",function(e,t){var n;e!==t&&(t&&(n=l.getGridData(t),n&&l.removeSelected(n)),e&&(n=l.getGridData(e),n?l.addSelected(n):r.selected=null))}),r.$watchCollection("datasource",function(n){var o=(new Date).getTime();l.aRows=n;var i,c=[];if(_.isArray(n)||(n=[]),l.bEnableActive&&r.activeRow&&(-1!==_.indexOf(n,r.activeRow)&&(t.info("GRID: storing active row to reopen later"),i=r.activeRow),l.removeActiveRow()),l.bEnableSelect){c=l.getSelectedAsArray();for(var d=c.length-1;d>=0;d--)if(-1===_.indexOf(n,c[d])){var p=l.getGridData(c[d]);p?l.removeSelected(p):"single"===l.selectType?r.selected=null:r.selected.splice(d,1)}}r.toggleActiveRow=function(e){var t=a.getSelection().toString();t||(r.activeRow===e.data?r.activeRow=void 0:r.activeRow=e.data)},r.toggleChecked=function(e,t){e.checked=!e.checked,e.checked?l.addSelected(e.record):l.removeSelected(e.record),t.stopPropagation()};for(var h,v,w,b,C=[],D={},$=function(e,t){var n=this;n[t]=e,n.$watch(function(){return n.$$gridData[t]},function(e){e!==n[t]&&(n[t]=e)})},y=0,A=n.length;A>y;y++){var S=n[y];if(h=l.getGridDataID(S),v=l.getGridData(S),!v||!_.isEqual(v.lastValue,S)){var R=r.$new(!1),x=S,E={};R.$$gridData=n[y],angular.forEach(S,$,R),l.additionalRowData&&angular.extend(R,l.additionalRowData),R.$row={checked:-1!==_.indexOf(c,x)?!0:!1,data:x,record:E},angular.extend(E,{scope:R,data:x,lastValue:_.clone(x),id:h}),l.putGridData(h,E),l.bEnableActive&&r.activeRow===x&&l.setActiveRow(x.data),v=E}D[h]=C.length,C.push(v)}for(y=s.length-1;y>=0;y--)v=s[y],D.hasOwnProperty(v.id)||(w=f[v.id],delete f[v.id],s.splice(w,1),y-1<s.length-1&&m(y,s.length),e.leave(v.row));for(y=0,A=C.length;A>y;y++)v=C[y],s.length>=y&&s[y]===v||(f.hasOwnProperty(v.id)?(0===y?e.move(v.row,u,null):e.move(v.row,u,s[y-1].row),b=f[v.id],s.splice(b,1),s.splice(y,0,v),f[v.id]=y,g(y+1,b+1)):(v.row=l.rowTemplate(v.scope,angular.noop),v.checkbox=v.row.find("td.dcm-grid-selectable i"),0===y?e.enter(v.row,u,null):e.enter(v.row,u,s[y-1].row),s.splice(y,0,v),f[v.id]=y,y+1<s.length&&g(y+1,s.length)));i&&(t.info("GRID: restoring active row"),l.setActiveRow(i));var P=(new Date).getTime()-o;t.info("GRID: Update after data change "+P+"ms")});var g=function(e,t){_.each(_.range(e,t),function(e){f[s[e].id]++})},m=function(e,t){_.each(_.range(e,t),function(e){f[s[e].id]--})};d.append(u),o.empty().append(d)}}}}]),angular.module("dcm-ui.grid").directive("dcmGridRowActions",[function(){return{require:"^dcmGrid",restrict:"E",scope:!1,compile:function(e){return function(t,n,a,r){r.rowActionContent=$.trim(e.html()),r.bRowActions=!0;var o={};angular.forEach(a,function(e,n){"$"!==n[0]&&void 0===t[n]&&""!==e&&(o[n.replace(/([A-Z])/g,"-$1").toLowerCase()]=e)}),r.addRowActionsAttributes(o)}}}}]),angular.module("dcm-ui.grid").directive("dcmGridRow",[function(){return{require:"^dcmGrid",restrict:"E",scope:!1,compile:function(){return function(e,t,n,a){var r={};angular.forEach(n,function(t,n){"$"!==n[0]&&void 0===e[n]&&""!==t&&(r[n.replace(/([A-Z])/g,"-$1").toLowerCase()]=t)}),a.addRowAttributes(r)}}}}]),angular.module("dcm-ui.grid").factory("datasource",["$timeout","$q","$log","$http",function(e,t,n,a){var r={create:function(r,o){var i,l,c,u,d,s,f,g,m,p,h,v,w=null,b={type:"get"},C={perPage:5};o.hasOwnProperty("autoLoad")||(o.autoLoad=!0),o.hasOwnProperty("requestDataFunction")||(o.requestDataFunction=function(n){var r=t.defer(),o=function(){a(n).then(function(t){var a=t.data;r.notify(a.hasOwnProperty("data")?a.data:a),a.complete||!a.hasOwnProperty("complete")?r.resolve():a.hasOwnProperty("complete")&&a.token&&(n.hasOwnProperty("params")||(n.params={}),n.params.token=a.token,e(function(){o()},250))},r.reject)};return o(),r.promise});var D=function(){if(h&&E.data.length){E.bFiltering=!0;var e=new Date;"ASC"!==E.sortOrder&&E.data.reverse(),E.data=_.sortBy(E.data,h),"ASC"!==E.sortOrder&&E.data.reverse();var t=new Date-e;n.info("DATASOURCE: Sort "+t+"ms"),E.bPaused?("ASC"!==E.sortOrder&&E.viewData.reverse(),E.viewData=_.sortBy(E.viewData,h),"ASC"!==E.sortOrder&&E.viewData.reverse(),x(),E.bFiltering=!1):R()}};r.$watch(function(){return E.sortFunction},function(e){h=e,D()});var $;r.$watch(function(){return E.sortOrder},function(e){("DESC"===e||$&&$===h)&&(E.data.reverse(),E.viewData.reverse(),x(),E.bFiltering=!1),$=h}),o.hasOwnProperty("pagination")&&(g=angular.extend({},C,o.pagination),d=r.$watchCollection(function(){return o.pagination},function(e){g=angular.extend(g,e),x()})),r.$watchCollection(function(){return o.request},function(e){u&&u(),s=angular.extend({},b,e),s.hasOwnProperty("params")&&(u=r.$watchCollection(function(){return o.request.params},function(e){s.params=e,E.bOptionsValid&&o.autoLoad&&y()})),E.bOptionsValid&&o.autoLoad&&y()}),r.$on("$destroy",function(){f&&f.resolve()});var y=_.debounce(function(){n.info("DATASOURCE: Starting new data load"),e(function(){if(E.bOptionsValid&&E.bFilterValid){if(E.bLoading){if(angular.equals(E.currentRequestOptions,s))return;f.resolve()}v=!0,E.bLoading=!0,E.data=[],E.pageData=[],E.viewData=[],E.pages=0,f=t.defer(),s.timeout=f.promise,E.currentRequestOptions=angular.copy(s);var a=!0,r=0,i=0,l=o.requestDataFunction(s),c=new Date;l.then(function(){E.bLoading=!1,a&&(h?D():(E.bFiltering=!0,R())),t.when(w).then(function(){var t=new Date-c;if(n.info("DATASOURCE: Complete loading time: "+t+"ms"),v=!1,o.hasOwnProperty("onLoadComplete")){var a=new Date;e(function(){o.onLoadComplete();var e=new Date-a;n.info("DATASOURCE: Load complete function: "+e+"ms")},0)}})},function(){n.warn("DATASOURCE: Request cancelled"),E.bLoading=!1,E.bFiltering=!1,v=!1},function(e){var t=new Date;E.data.push.apply(E.data,e);var o=new Date-t;n.info("DATASOURCE: Loading new data: "+o+"ms"),1e3>r?(h?D():(E.bFiltering=!0,R()),a=!1,i=t,r=new Date-t):(a=!0,n.info("DATASOURCE: skipping sort/filter due to previous process time"),r-=new Date-i),i=t})}},0)},100);o.hasOwnProperty("requestValid")&&o.requestValid&&r.$watch(o.requestValid,function(e){E.bOptionsValid=!!e,E.bOptionsValid&&o.autoLoad&&y()});var A=null,S=null,R=function(){return S?e.cancel(A):S=t.defer(),w=S.promise,A=e(function(){var e,t,a=0,r=[];if(E.bPaused){if(i){for(t=E.viewData.length;t>a;a++)e=E.viewData[a],i(e)&&r.push(e);E.viewData=r}}else{var o=new Date;if(i){for(t=E.data.length;t>a;a++)e=E.data[a],i(e)&&r.push(e);E.viewData=r}else E.viewData=E.data.slice(0);x(),E.bFiltering=!1;var l=new Date-o;n.info("DATASOURCE: Filter "+l+"ms")}S.resolve(),S=null},100),w},x=function(){g?(g.perPage=parseInt(g.perPage,10),(!g.perPage||g.perPage<=0)&&(g.perPage=C.perPage),E.pages=Math.ceil(E.viewData.length/g.perPage),E.currentPage=Math.min(E.currentPage,E.pages),E.currentPage<=0&&(E.currentPage=Math.min(1,E.pages)),m=g.perPage*(E.currentPage-1),p=Math.min(m+g.perPage,E.viewData.length),E.pageData=E.viewData.slice(m,p)):(E.pageData=E.viewData,E.viewData.length?(E.pages=1,E.currentPage=1):(E.pages=0,E.currentPage=0))},E={bLoading:!1,bFiltering:!1,bFilterValid:!0,bOptionsValid:!0,bPaused:!1,initialRequestOptions:o.request,currentRequestOptions:{},currentPage:0,data:[],viewData:[],pageData:[],pages:0,sortFunction:null,sortOrder:"ASC",setPage:function(e){E.currentPage=e,x()},loadData:function(){E.bPaused=!1,y()},cancelRequest:function(){f&&f.resolve()},pause:function(){E.bPaused=!0,E.bFiltering=!1},resume:function(){E.bPaused=!1,E.bFiltering=!0,R()}};return o.hasOwnProperty("filter")&&(i=o.filter.filterFunction,o.hasOwnProperty("filterValid")&&(c=r.$watch(o.filterValid,function(e){E.bFilterValid=!!e,!E.bLoading&&E.bFilterValid&&(E.bFiltering=!0,R())})),l=r.$watchCollection(function(){return o.filter.values},function(){E.bFilterValid&&(E.bFiltering=!0,R())})),E}};return r}]),angular.module("dcm-ui.grid").factory("filters",["$interpolate",function(e){var t=function(e){return void 0===e?"":e},n=function(e,t){var n={},a=[];if(n[t]=!0,e&&angular.isArray(e)&&e.length)for(var r=0;r<e.length;r++)n[e[r]]=!0;for(var o in n)a.push(o);return a},a={"new":function(a){var r={data:{},defaultValues:{},defaultParams:{},values:{},requestParams:{},filterFunctions:[]};return r.resetFilters=function(){angular.extend(r.values,r.defaultValues),angular.extend(r.requestParams,r.defaultParams)},r.addDefaultValue=function(e,n){r.defaultValues[e]=t(n),r.values[e]=r.defaultValues[e]},r.addDefaultParam=function(e,n){r.defaultParams[e]=t(n),r.requestParams[e]=r.defaultParams[e]},r.onChange=function(e,t,n){a.$watch(function(){return r[e][t]},n)},r.onCollectionChange=function(e,t,n){a.$watchCollection(function(){return r[e][t]},n)},r.addFilterExactMatchObject=function(e,t){r.filterFunctions.push(function(n,a){return r.data[t]&&!r.data[t][a[e]]?!1:!0})},r.addFilterInteger=function(e,t){var n;switch(t){case"lt":n=function(e,t){return t>e};break;case"gt":n=function(e,t){return e>t};break;case"eq":n=function(e,t){return e===t}}r.filterFunctions.push(function(t,a){return""===t[e]||n(parseInt(a[e],10),parseInt(t[e],10))?!0:!1})},r.addFilterExactMatch=function(e,t){var n=function(e,t){return e&&e.toString().toLowerCase()===t.toString().toLowerCase()?!0:!1};r.addFilterWithComparator(n,e,t)},r.addFilterPartialMatch=function(e,t){var n=function(e,t){return e&&-1!==e.toString().toLowerCase().indexOf(t.toString().toLowerCase())?!0:!1};r.addFilterWithComparator(n,e,t)},r.addFilterPartialMatchFromStart=function(e,t){var n=function(e,t){return e&&0===e.toString().toLowerCase().indexOf(t.toString().toLowerCase())?!0:!1};r.addFilterWithComparator(n,e,t)},r.addFilterWithComparator=function(t,a,o){var i,l;o&&!angular.isArray(o)?i=e(o):l=n(o,a),r.filterFunctions.push(function(e,n){if(""!==e[a]){var r,o=e[a];if(i){if(r=i(n),t(r,o))return!0}else for(var c=0;c<l.length;c++)if(r=n[l[c]],t(r,o))return!0;return!1}return!0})},r.addFilterWhenValueIs=function(e,t){t=t.toString(),r.filterFunctions.push(function(n,a){return n[e]&&n[e].toString()===t&&a[e].toString()!==t?!1:!0})},r.setData=function(e,t){r.data[e]=t},r.filterFunction=function(e){for(var t=!0,n=angular.extend({},r.requestParams,r.values),a=0,o=r.filterFunctions.length;o>a;a++){if(!t)return t;t=r.filterFunctions[a](n,e)}return t},r.addStandardTextSearchFilter=function(e,t){r.addDefaultValue(e,""),r.addFilterPartialMatch(e,t)},r.addExactTextSearchFilter=function(e,t){r.addDefaultValue(e,""),r.addFilterExactMatch(e,t)},r.addTextSearchMatchFromStartFilter=function(e,t){r.addDefaultValue(e,""),r.addFilterPartialMatchFromStart(e,t)},r}};return a}]);
//# sourceMappingURL=dcm-ui-grid.min.js.map